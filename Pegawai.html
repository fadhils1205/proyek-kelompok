<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Pegawai | Dashboard</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
  <!-- Tempusdominus Bootstrap 4 -->
  <link rel="stylesheet" href="plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css">
  <!-- iCheck -->
  <link rel="stylesheet" href="plugins/icheck-bootstrap/icheck-bootstrap.min.css">
  <!-- JQVMap -->
  <link rel="stylesheet" href="plugins/jqvmap/jqvmap.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="dist/css/adminlte.min.css">
  <!-- overlayScrollbars -->
  <link rel="stylesheet" href="plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
  <!-- Daterange picker -->
  <link rel="stylesheet" href="plugins/daterangepicker/daterangepicker.css">
  <!-- summernote -->
  <link rel="stylesheet" href="plugins/summernote/summernote-bs4.min.css">

  <style>
    .table thead th { white-space: nowrap; }
    .badge-status { font-size: .8rem; }
  </style>
</head>
<body class="hold-transition sidebar-mini layout-fixed">
<div class="wrapper">

  <!-- Preloader -->
  <div class="preloader flex-column justify-content-center align-items-center">
    <img class="animation__shake" src="dist/img/AdminLTELogo.png" alt="AdminLTELogo" height="60" width="60">
  </div>

  <!-- Navbar -->
  <nav class="main-header navbar navbar-expand navbar-white navbar-light">
    <!-- Left navbar links -->
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
      </li>
      <li class="nav-item d-none d-sm-inline-block">
        <a href="#" class="nav-link">Beranda</a>
      </li>
      <li class="nav-item d-none d-sm-inline-block">
        <a href="#" class="nav-link">Kontak HR</a>
      </li>
    </ul>

    <!-- Right navbar links -->
    <ul class="navbar-nav ml-auto">
      <!-- Search -->
      <li class="nav-item">
        <a class="nav-link" data-widget="navbar-search" href="#" role="button">
          <i class="fas fa-search"></i>
        </a>
        <div class="navbar-search-block">
          <form class="form-inline" onsubmit="return false;">
            <div class="input-group input-group-sm">
              <input id="globalSearch" class="form-control form-control-navbar" type="search" placeholder="Cari pegawai (nama/NIP/departemen)" aria-label="Search">
              <div class="input-group-append">
                <button class="btn btn-navbar" type="button" onclick="filterPegawai()">
                  <i class="fas fa-search"></i>
                </button>
                <button class="btn btn-navbar" type="button" data-widget="navbar-search">
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </div>
          </form>
        </div>
      </li>

      <!-- Notifications Dropdown Menu (HR) -->
      <li class="nav-item dropdown">
        <a class="nav-link" data-toggle="dropdown" href="#">
          <i class="far fa-bell"></i>
          <span class="badge badge-warning navbar-badge">4</span>
        </a>
        <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
          <span class="dropdown-item dropdown-header">Pemberitahuan HR</span>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item"><i class="fas fa-user-clock mr-2"></i> 3 pegawai izin hari ini <span class="float-right text-muted text-sm">baru</span></a>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item"><i class="fas fa-id-badge mr-2"></i> 2 kontrak habis < 30 hari</a>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item"><i class="fas fa-graduation-cap mr-2"></i> Pelatihan wajib Jumat</a>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item dropdown-footer">Lihat semua</a>
        </div>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-widget="fullscreen" href="#" role="button"><i class="fas fa-expand-arrows-alt"></i></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-widget="control-sidebar" data-controlsidebar-slide="true" href="#" role="button"><i class="fas fa-th-large"></i></a>
      </li>
    </ul>
  </nav>
  <!-- /.navbar -->

  <!-- Main Sidebar Container -->
  <aside class="main-sidebar sidebar-dark-primary elevation-4">
    <!-- Brand Logo -->
    <a href="#" class="brand-link">
      <img src="dist/img/AdminLTELogo.png" alt="AdminLTE Logo" class="brand-image img-circle elevation-3" style="opacity: .8">
      <span class="brand-text font-weight-light">AdminLTE 3</span>
    </a>

    <!-- Sidebar -->
    <div class="sidebar">
      <!-- Sidebar user panel (optional) -->
      <div class="user-panel mt-3 pb-3 mb-3 d-flex">
        <div class="image">
          <img src="dist/img/user2-160x160.jpg" class="img-circle elevation-2" alt="User Image">
        </div>
        <div class="info">
          <a href="#" class="d-block">Administrator HR</a>
        </div>
      </div>

      <!-- Sidebar Menu (pakai struktur aslinya, teks disesuaikan pegawai) -->
      <nav class="mt-2">
        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
          <li class="nav-item menu-open">
            <a href="#" class="nav-link active">
              <i class="nav-icon fas fa-tachometer-alt"></i>
              <p>
                Dashboard Pegawai
                <i class="right fas fa-angle-left"></i>
              </p>
            </a>
            <ul class="nav nav-treeview">
              <li class="nav-item"><a href="#" class="nav-link active"><i class="far fa-circle nav-icon"></i><p>Ringkasan</p></a></li>
              <li class="nav-item"><a href="#tabelPegawai" class="nav-link"><i class="far fa-circle nav-icon"></i><p>Data Pegawai</p></a></li>
              <li class="nav-item"><a href="#" class="nav-link"><i class="far fa-circle nav-icon"></i><p>Kehadiran</p></a></li>
            </ul>
          </li>
          <li class="nav-item"><a href="pages/widgets.html" class="nav-link"><i class="nav-icon fas fa-th"></i><p>Widgets</p></a></li>
          <li class="nav-item"><a href="#" class="nav-link"><i class="nav-icon fas fa-copy"></i><p>Layout Options<i class="fas fa-angle-left right"></i><span class="badge badge-info right">6</span></p></a>
            <ul class="nav nav-treeview">
              <li class="nav-item"><a href="pages/layout/top-nav.html" class="nav-link"><i class="far fa-circle nav-icon"></i><p>Top Navigation</p></a></li>
              <li class="nav-item"><a href="pages/layout/top-nav-sidebar.html" class="nav-link"><i class="far fa-circle nav-icon"></i><p>Top Navigation + Sidebar</p></a></li>
              <li class="nav-item"><a href="pages/layout/boxed.html" class="nav-link"><i class="far fa-circle nav-icon"></i><p>Boxed</p></a></li>
              <li class="nav-item"><a href="pages/layout/fixed-sidebar.html" class="nav-link"><i class="far fa-circle nav-icon"></i><p>Fixed Sidebar</p></a></li>
              <li class="nav-item"><a href="pages/layout/fixed-sidebar-custom.html" class="nav-link"><i class="far fa-circle nav-icon"></i><p>Fixed Sidebar <small>+ Custom Area</small></p></a></li>
              <li class="nav-item"><a href="pages/layout/fixed-topnav.html" class="nav-link"><i class="far fa-circle nav-icon"></i><p>Fixed Navbar</p></a></li>
              <li class="nav-item"><a href="pages/layout/fixed-footer.html" class="nav-link"><i class="far fa-circle nav-icon"></i><p>Fixed Footer</p></a></li>
              <li class="nav-item"><a href="pages/layout/collapsed-sidebar.html" class="nav-link"><i class="far fa-circle nav-icon"></i><p>Collapsed Sidebar</p></a></li>
            </ul>
          </li>
          <li class="nav-item"><a href="#" class="nav-link"><i class="nav-icon fas fa-chart-pie"></i><p>Charts<i class="right fas fa-angle-left"></i></p></a>
            <ul class="nav nav-treeview">
              <li class="nav-item"><a href="pages/charts/chartjs.html" class="nav-link"><i class="far fa-circle nav-icon"></i><p>ChartJS</p></a></li>
              <li class="nav-item"><a href="pages/charts/flot.html" class="nav-link"><i class="far fa-circle nav-icon"></i><p>Flot</p></a></li>
              <li class="nav-item"><a href="pages/charts/inline.html" class="nav-link"><i class="far fa-circle nav-icon"></i><p>Inline</p></a></li>
              <li class="nav-item"><a href="pages/charts/uplot.html" class="nav-link"><i class="far fa-circle nav-icon"></i><p>uPlot</p></a></li>
            </ul>
          </li>
          <li class="nav-item"><a href="#" class="nav-link"><i class="nav-icon fas fa-edit"></i><p>Forms<i class="fas fa-angle-left right"></i></p></a>
            <ul class="nav nav-treeview">
              <li class="nav-item"><a href="pages/forms/general.html" class="nav-link"><i class="far fa-circle nav-icon"></i><p>General Elements</p></a></li>
              <li class="nav-item"><a href="pages/forms/advanced.html" class="nav-link"><i class="far fa-circle nav-icon"></i><p>Advanced Elements</p></a></li>
              <li class="nav-item"><a href="pages/forms/editors.html" class="nav-link"><i class="far fa-circle nav-icon"></i><p>Editors</p></a></li>
              <li class="nav-item"><a href="pages/forms/validation.html" class="nav-link"><i class="far fa-circle nav-icon"></i><p>Validation</p></a></li>
            </ul>
          </li>
          <li class="nav-item"><a href="#" class="nav-link"><i class="nav-icon fas fa-table"></i><p>Tables<i class="fas fa-angle-left right"></i></p></a>
            <ul class="nav nav-treeview">
              <li class="nav-item"><a href="pages/tables/simple.html" class="nav-link"><i class="far fa-circle nav-icon"></i><p>Simple Tables</p></a></li>
              <li class="nav-item"><a href="pages/tables/data.html" class="nav-link"><i class="far fa-circle nav-icon"></i><p>DataTables</p></a></li>
              <li class="nav-item"><a href="pages/tables/jsgrid.html" class="nav-link"><i class="far fa-circle nav-icon"></i><p>jsGrid</p></a></li>
            </ul>
          </li>
          <!-- menu lainnya tetap sesuai template -->
        </ul>
      </nav>
      <!-- /.sidebar-menu -->
    </div>
    <!-- /.sidebar -->
  </aside>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1 class="m-0">Dashboard Pegawai</h1>
          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active">Dashboard Pegawai</li>
            </ol>
          </div>
        </div>
      </div>
    </div>

    <!-- Main content -->
    <section class="content">
      <div class="container-fluid">
        <!-- Small boxes (Stat box) -->
        <div class="row">
          <div class="col-lg-3 col-6">
            <div class="small-box bg-info">
              <div class="inner">
                <h3 id="statTotalPegawai">150</h3>
                <p>Total Pegawai</p>
              </div>
              <div class="icon"><i class="ion ion-person-stalker"></i></div>
              <a href="#tabelPegawai" class="small-box-footer">Lihat data <i class="fas fa-arrow-circle-right"></i></a>
            </div>
          </div>
          <div class="col-lg-3 col-6">
            <div class="small-box bg-success">
              <div class="inner">
                <h3 id="statHadir">120</h3>
                <p>Hadir Hari Ini</p>
              </div>
              <div class="icon"><i class="ion ion-checkmark"></i></div>
              <a href="#" class="small-box-footer">Detail presensi <i class="fas fa-arrow-circle-right"></i></a>
            </div>
          </div>
          <div class="col-lg-3 col-6">
            <div class="small-box bg-warning">
              <div class="inner">
                <h3 id="statCuti">6</h3>
                <p>Cuti Aktif</p>
              </div>
              <div class="icon"><i class="ion ion-android-calendar"></i></div>
              <a href="#" class="small-box-footer">Kelola cuti <i class="fas fa-arrow-circle-right"></i></a>
            </div>
          </div>
          <div class="col-lg-3 col-6">
            <div class="small-box bg-danger">
              <div class="inner">
                <h3 id="statKontrak">5</h3>
                <p>Kontrak Habis &lt; 30 hari</p>
              </div>
              <div class="icon"><i class="ion ion-alert"></i></div>
              <a href="#" class="small-box-footer">Lihat daftar <i class="fas fa-arrow-circle-right"></i></a>
            </div>
          </div>
        </div>
        <!-- /.row -->

        <!-- Main row -->
        <div class="row">
          <!-- Left col -->
          <section class="col-lg-7 connectedSortable">
            <!-- Charts with tabs -->
            <div class="card">
              <div class="card-header">
                <h3 class="card-title"><i class="fas fa-chart-pie mr-1"></i> Kehadiran</h3>
                <div class="card-tools">
                  <ul class="nav nav-pills ml-auto">
                    <li class="nav-item"><a class="nav-link active" href="#revenue-chart" data-toggle="tab">Area</a></li>
                    <li class="nav-item"><a class="nav-link" href="#sales-chart" data-toggle="tab">Donut</a></li>
                  </ul>
                </div>
              </div>
              <div class="card-body">
                <div class="tab-content p-0">
                  <div class="chart tab-pane active" id="revenue-chart" style="position: relative; height: 300px;">
                    <canvas id="revenue-chart-canvas" height="300" style="height: 300px;"></canvas>
                  </div>
                  <div class="chart tab-pane" id="sales-chart" style="position: relative; height: 300px;">
                    <canvas id="sales-chart-canvas" height="300" style="height: 300px;"></canvas>
                  </div>
                </div>
              </div>
            </div>

            <!-- DIRECT CHAT (HR notes) -->
            <div class="card direct-chat direct-chat-primary">
              <div class="card-header">
                <h3 class="card-title">Catatan HR</h3>
                <div class="card-tools">
                  <span title="3 Pesan Baru" class="badge badge-primary">3</span>
                  <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i></button>
                  <button type="button" class="btn btn-tool" title="Contacts" data-widget="chat-pane-toggle"><i class="fas fa-comments"></i></button>
                  <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                </div>
              </div>
              <div class="card-body">
                <div class="direct-chat-messages">
                  <div class="direct-chat-msg">
                    <div class="direct-chat-infos clearfix">
                      <span class="direct-chat-name float-left">Alexander Pierce</span>
                      <span class="direct-chat-timestamp float-right">23 Jan 2:00 pm</span>
                    </div>
                    <img class="direct-chat-img" src="dist/img/user1-128x128.jpg" alt="message user image">
                    <div class="direct-chat-text">Perlu update data kontrak pegawai divisi IT minggu ini.</div>
                  </div>
                  <div class="direct-chat-msg right">
                    <div class="direct-chat-infos clearfix">
                      <span class="direct-chat-name float-right">Sarah Bullock</span>
                      <span class="direct-chat-timestamp float-left">23 Jan 2:05 pm</span>
                    </div>
                    <img class="direct-chat-img" src="dist/img/user3-128x128.jpg" alt="message user image">
                    <div class="direct-chat-text">Noted, saya siapkan draft perpanjangan kontraknya.</div>
                  </div>
                  <div class="direct-chat-msg">
                    <div class="direct-chat-infos clearfix">
                      <span class="direct-chat-name float-left">Alexander Pierce</span>
                      <span class="direct-chat-timestamp float-right">23 Jan 5:37 pm</span>
                    </div>
                    <img class="direct-chat-img" src="dist/img/user1-128x128.jpg" alt="message user image">
                    <div class="direct-chat-text">Jangan lupa rekap cuti Q4 untuk rapat Jumat.</div>
                  </div>
                </div>
                <div class="direct-chat-contacts">
                  <ul class="contacts-list">
                    <li><a href="#"><img class="contacts-list-img" src="dist/img/user1-128x128.jpg" alt="User Avatar"><div class="contacts-list-info"><span class="contacts-list-name">Count HR<ul class="float-right"><small class="contacts-list-date">2/28/2015</small></ul></span><span class="contacts-list-msg">Perpanjang kontrak..</span></div></a></li>
                    <li><a href="#"><img class="contacts-list-img" src="dist/img/user7-128x128.jpg" alt="User Avatar"><div class="contacts-list-info"><span class="contacts-list-name">Sarah Doe<small class="contacts-list-date float-right">2/23/2015</small></span><span class="contacts-list-msg">Laporan kehadiran..</span></div></a></li>
                  </ul>
                </div>
              </div>
              <div class="card-footer">
                <form action="#" method="post">
                  <div class="input-group">
                    <input type="text" name="message" placeholder="Tulis catatan ..." class="form-control">
                    <span class="input-group-append"><button type="button" class="btn btn-primary">Kirim</button></span>
                  </div>
                </form>
              </div>
            </div>

            <!-- TO DO List (disesuaikan HR) -->
            <div class="card">
              <div class="card-header">
                <h3 class="card-title"><i class="ion ion-clipboard mr-1"></i> To Do HR</h3>
                <div class="card-tools">
                  <ul class="pagination pagination-sm">
                    <li class="page-item"><a href="#" class="page-link">&laquo;</a></li>
                    <li class="page-item"><a href="#" class="page-link">1</a></li>
                    <li class="page-item"><a href="#" class="page-link">2</a></li>
                    <li class="page-item"><a href="#" class="page-link">3</a></li>
                    <li class="page-item"><a href="#" class="page-link">&raquo;</a></li>
                  </ul>
                </div>
              </div>
              <div class="card-body">
                <ul class="todo-list" data-widget="todo-list">
                  <li><span class="handle"><i class="fas fa-ellipsis-v"></i><i class="fas fa-ellipsis-v"></i></span>
                    <div class="icheck-primary d-inline ml-2"><input type="checkbox" id="todoCheck1"><label for="todoCheck1"></label></div>
                    <span class="text">Verifikasi data pegawai baru</span>
                    <small class="badge badge-danger"><i class="far fa-clock"></i> 2 mins</small>
                    <div class="tools"><i class="fas fa-edit"></i><i class="fas fa-trash-o"></i></div>
                  </li>
                  <li><span class="handle"><i class="fas fa-ellipsis-v"></i><i class="fas fa-ellipsis-v"></i></span>
                    <div class="icheck-primary d-inline ml-2"><input type="checkbox" id="todoCheck2" checked><label for="todoCheck2"></label></div>
                    <span class="text">Input presensi hari ini</span>
                    <small class="badge badge-info"><i class="far fa-clock"></i> 4 hours</small>
                    <div class="tools"><i class="fas fa-edit"></i><i class="fas fa-trash-o"></i></div>
                  </li>
                  <li><span class="handle"><i class="fas fa-ellipsis-v"></i><i class="fas fa-ellipsis-v"></i></span>
                    <div class="icheck-primary d-inline ml-2"><input type="checkbox" id="todoCheck3"><label for="todoCheck3"></label></div>
                    <span class="text">Kirim rekap cuti Q4</span>
                    <small class="badge badge-warning"><i class="far fa-clock"></i> 1 day</small>
                    <div class="tools"><i class="fas fa-edit"></i><i class="fas fa-trash-o"></i></div>
                  </li>
                </ul>
              </div>
              <div class="card-footer clearfix">
                <button type="button" class="btn btn-primary float-right"><i class="fas fa-plus"></i> Tambah item</button>
              </div>
            </div>
          </section>

          <!-- right col (map, graph, calendar tetap seperti template) -->
          <section class="col-lg-5 connectedSortable">
            <!-- Map card -->
            <div class="card bg-gradient-primary">
              <div class="card-header border-0">
                <h3 class="card-title"><i class="fas fa-map-marker-alt mr-1"></i> Sebaran Pegawai</h3>
                <div class="card-tools">
                  <button type="button" class="btn btn-primary btn-sm daterange" title="Date range"><i class="far fa-calendar-alt"></i></button>
                  <button type="button" class="btn btn-primary btn-sm" data-card-widget="collapse" title="Collapse"><i class="fas fa-minus"></i></button>
                </div>
              </div>
              <div class="card-body"><div id="world-map" style="height: 250px; width: 100%;"></div></div>
              <div class="card-footer bg-transparent">
                <div class="row">
                  <div class="col-4 text-center"><div id="sparkline-1"></div><div class="text-white">Pegawai</div></div>
                  <div class="col-4 text-center"><div id="sparkline-2"></div><div class="text-white">Hadir</div></div>
                  <div class="col-4 text-center"><div id="sparkline-3"></div><div class="text-white">Cuti</div></div>
                </div>
              </div>
            </div>

            <!-- solid sales graph -->
            <div class="card bg-gradient-info">
              <div class="card-header border-0">
                <h3 class="card-title"><i class="fas fa-th mr-1"></i> Grafik Kehadiran Mingguan</h3>
                <div class="card-tools">
                  <button type="button" class="btn bg-info btn-sm" data-card-widget="collapse"><i class="fas fa-minus"></i></button>
                  <button type="button" class="btn bg-info btn-sm" data-card-widget="remove"><i class="fas fa-times"></i></button>
                </div>
              </div>
              <div class="card-body"><canvas class="chart" id="line-chart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas></div>
              <div class="card-footer bg-transparent">
                <div class="row">
                  <div class="col-4 text-center"><input type="text" class="knob" data-readonly="true" value="20" data-width="60" data-height="60" data-fgColor="#39CCCC"><div class="text-white">Izin</div></div>
                  <div class="col-4 text-center"><input type="text" class="knob" data-readonly="true" value="70" data-width="60" data-height="60" data-fgColor="#39CCCC"><div class="text-white">Hadir</div></div>
                  <div class="col-4 text-center"><input type="text" class="knob" data-readonly="true" value="10" data-width="60" data-height="60" data-fgColor="#39CCCC"><div class="text-white">Cuti</div></div>
                </div>
              </div>
            </div>

            <!-- Calendar -->
            <div class="card bg-gradient-success">
              <div class="card-header border-0">
                <h3 class="card-title"><i class="far fa-calendar-alt"></i> Kalender HR</h3>
                <div class="card-tools">
                  <div class="btn-group">
                    <button type="button" class="btn btn-success btn-sm dropdown-toggle" data-toggle="dropdown" data-offset="-52"><i class="fas fa-bars"></i></button>
                    <div class="dropdown-menu" role="menu">
                      <a href="#" class="dropdown-item">Tambah event</a>
                      <a href="#" class="dropdown-item">Bersihkan event</a>
                      <div class="dropdown-divider"></div>
                      <a href="#" class="dropdown-item">Lihat kalender</a>
                    </div>
                  </div>
                  <button type="button" class="btn btn-success btn-sm" data-card-widget="collapse"><i class="fas fa-minus"></i></button>
                  <button type="button" class="btn btn-success btn-sm" data-card-widget="remove"><i class="fas fa-times"></i></button>
                </div>
              </div>
              <div class="card-body pt-0"><div id="calendar" style="width: 100%"></div></div>
            </div>
          </section>
        </div>
      </div>
    </section>
  </div>

  <footer class="main-footer">
    <strong>Copyright &copy; 2014-2025 <a href="https://adminlte.io">AdminLTE.io</a>.</strong>
    All rights reserved.
    <div class="float-right d-none d-sm-inline-block"><b>Modul</b> Pegawai</div>
  </footer>

  <aside class="control-sidebar control-sidebar-dark"></aside>
</div>

<!-- Modal Tambah/Edit Pegawai -->
<div class="modal fade" id="modalPegawai" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Tambah Pegawai</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      </div>
      <form id="formPegawai">
        <div class="modal-body">
          <div class="row">
            <div class="col-md-4"><div class="form-group"><label>NIP</label><input class="form-control" name="nip" required></div></div>
            <div class="col-md-8"><div class="form-group"><label>Nama</label><input class="form-control" name="nama" required></div></div>
            <div class="col-md-4"><div class="form-group"><label>Jabatan</label><input class="form-control" name="jabatan" required></div></div>
            <div class="col-md-4"><div class="form-group"><label>Departemen</label><input class="form-control" name="departemen" required></div></div>
            <div class="col-md-4"><div class="form-group"><label>Status</label>
              <select class="form-control" name="status" required>
                <option value="Tetap">Tetap</option>
                <option value="Kontrak">Kontrak</option>
                <option value="Magang">Magang</option>
              </select></div></div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Batal</button>
          <button type="submit" class="btn btn-primary">Simpan</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- jQuery -->
<script src="plugins/jquery/jquery.min.js"></script>
<!-- jQuery UI 1.11.4 -->
<script src="plugins/jquery-ui/jquery-ui.min.js"></script>
<script>$.widget.bridge('uibutton', $.ui.button)</script>
<!-- Bootstrap 4 -->
<script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- ChartJS -->
<script src="plugins/chart.js/Chart.min.js"></script>
<!-- Sparkline -->
<script src="plugins/sparklines/sparkline.js"></script>
<!-- JQVMap -->
<script src="plugins/jqvmap/jquery.vmap.min.js"></script>
<script src="plugins/jqvmap/maps/jquery.vmap.world.js"></script>
<!-- jQuery Knob Chart -->
<script src="plugins/jquery-knob/jquery.knob.min.js"></script>
<!-- daterangepicker -->
<script src="plugins/moment/moment.min.js"></script>
<script src="plugins/daterangepicker/daterangepicker.js"></script>
<!-- Tempusdominus Bootstrap 4 -->
<script src="plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
<!-- Summernote -->
<script src="plugins/summernote/summernote-bs4.min.js"></script>
<!-- overlayScrollbars -->
<script src="plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/adminlte.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="dist/js/demo.js"></script>
<!-- AdminLTE dashboard demo (for charts, map, etc.) -->
<!-- Hapus demo bawaan agar tidak bentrok chart di halaman ini -->
<!-- <script src="dist/js/pages/dashboard.js"></script> -->
<script>
  // ===== Dummy data pegawai (ganti dengan data backend) =====
  const pegawai = [
    { nip:'19870101-001', nama:'Ahmad Rasyid', jabatan:'Staff Produksi', departemen:'Produksi', status:'Tetap' },
    { nip:'19920502-015', nama:'Siti Lestari', jabatan:'HR Generalist', departemen:'HRD', status:'Tetap' },
    { nip:'20000112-023', nama:'Bima Pratama', jabatan:'Quality Control', departemen:'QC', status:'Kontrak' },
    { nip:'19981130-044', nama:'Nadia Putri', jabatan:'Accountant', departemen:'Keuangan', status:'Tetap' },
    { nip:'20030321-055', nama:'Raka Aditya', jabatan:'IT Support', departemen:'IT', status:'Magang' },
  ];

  // inject ke tabel di area Data Pegawai (menggunakan blok tabel aslinya diganti via JS)
  function ensureTable(){
    let tableCard = document.getElementById('tabelPegawai');
    if(!tableCard){
      // jika belum ada, sisipkan kartu tabel setelah chart
      const after = document.querySelector('.content .row section.col-lg-7');
      const card = document.createElement('div');
      card.className = 'card';
      card.id = 'tabelPegawai';
      card.innerHTML = `
        <div class="card-header">
          <h3 class="card-title"><i class="fas fa-users mr-1"></i> Data Pegawai</h3>
          <div class="card-tools">
            <div class="input-group input-group-sm" style="width: 250px;">
              <input type="text" id="searchPegawai" class="form-control float-right" placeholder="Cari nama / NIP / departemen">
              <div class="input-group-append">
                <button type="button" class="btn btn-default" onclick="filterPegawai()"><i class="fas fa-search"></i></button>
              </div>
            </div>
          </div>
        </div>
        <div class="card-body table-responsive p-0" style="max-height: 380px;">
          <table class="table table-hover text-nowrap">
            <thead>
              <tr>
                <th>#</th>
                <th>NIP</th>
                <th>Nama</th>
                <th>Jabatan</th>
                <th>Departemen</th>
                <th>Status</th>
                <th>Aksi</th>
              </tr>
            </thead>
            <tbody id="pegawaiBody"></tbody>
          </table>
        </div>
        <div class="card-footer clearfix">
          <button class="btn btn-primary" data-toggle="modal" data-target="#modalPegawai"><i class="fas fa-user-plus mr-1"></i>Tambah Pegawai</button>
          <button class="btn btn-outline-secondary float-right" onclick="downloadCSV()"><i class="fas fa-file-csv mr-1"></i>Export CSV</button>
        </div>`;
      after.appendChild(card);
    }
  }

  function renderPegawai(list){
    ensureTable();
    const body = document.getElementById('pegawaiBody');
    body.innerHTML = '';
    list.forEach((p, idx) => {
      const badgeClass = p.status === 'Tetap' ? 'badge-success' : (p.status === 'Kontrak' ? 'badge-warning' : 'badge-info');
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${idx+1}</td>
        <td>${p.nip}</td>
        <td>${p.nama}</td>
        <td>${p.jabatan}</td>
        <td>${p.departemen}</td>
        <td><span class="badge ${badgeClass} badge-status">${p.status}</span></td>
        <td>
          <button class="btn btn-xs btn-outline-primary" onclick="editPegawai(${idx})"><i class="fas fa-edit"></i></button>
          <button class="btn btn-xs btn-outline-danger" onclick="hapusPegawai(${idx})"><i class="fas fa-trash"></i></button>
        </td>`;
      body.appendChild(tr);
    });
    // update stat box sederhana
    document.getElementById('statTotalPegawai').textContent = list.length;
  }

  function filterPegawai(){
    const q1 = (document.getElementById('searchPegawai')?.value || '').toLowerCase();
    const q2 = (document.getElementById('globalSearch')?.value || '').toLowerCase();
    const q = (q1 || q2);
    const filtered = !q ? pegawai : pegawai.filter(p => {
      return p.nip.toLowerCase().includes(q) || p.nama.toLowerCase().includes(q) || p.departemen.toLowerCase().includes(q) || p.jabatan.toLowerCase().includes(q);
    });
    renderPegawai(filtered);
  }

  function editPegawai(idx){
    const p = pegawai[idx];
    const form = document.getElementById('formPegawai');
    form.dataset.editIndex = idx;
    form.nip.value = p.nip; form.nama.value = p.nama; form.jabatan.value = p.jabatan; form.departemen.value = p.departemen; form.status.value = p.status;
    document.querySelector('#modalPegawai .modal-title').textContent = 'Edit Pegawai';
    $('#modalPegawai').modal('show');
  }

  function hapusPegawai(idx){
    if(confirm('Hapus pegawai ini?')){ pegawai.splice(idx,1); filterPegawai(); }
  }

  document.getElementById('formPegawai').addEventListener('submit', function(e){
    e.preventDefault();
    const data = { nip: this.nip.value.trim(), nama: this.nama.value.trim(), jabatan: this.jabatan.value.trim(), departemen: this.departemen.value.trim(), status: this.status.value };
    const editIdx = this.dataset.editIndex;
    if(editIdx !== undefined && editIdx !== ''){ pegawai[parseInt(editIdx,10)] = data; delete this.dataset.editIndex; }
    else { pegawai.push(data); }
    this.reset(); $('#modalPegawai').modal('hide'); filterPegawai();
  });

  function downloadCSV(){
    const header = ['NIP','Nama','Jabatan','Departemen','Status'];
    const rows = pegawai.map(p => [p.nip, p.nama, p.jabatan, p.departemen, p.status]);
    const csv = [header, ...rows].map(r => r.map(v => '"'+String(v).replace(/"/g,'""')+'"').join(',')).join('
');
    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = 'pegawai.csv'; a.click(); URL.revokeObjectURL(url);
  }

  // override charts in this page to use pegawai semantics
  $(function(){
    renderPegawai(pegawai);

    // Area (kehadiran bulanan)
    const ctxArea = document.getElementById('revenue-chart-canvas').getContext('2d');
    new Chart(ctxArea, { type:'line', data:{ labels:['Mei','Jun','Jul','Agu','Sep','Okt'], datasets:[{ label:'% Hadir', data:[92,95,90,96,94,97], borderWidth:2, fill:false, tension:.2 }] }, options:{ maintainAspectRatio:false, scales: { yAxes: [{ ticks: { beginAtZero: true, suggestedMax: 100 } }] } } });

    // Donut (status karyawan)
    const statusCount = pegawai.reduce((a,p)=>{a[p.status]=(a[p.status]||0)+1; return a;},{});
    const ctxDonut = document.getElementById('sales-chart-canvas').getContext('2d');
    new Chart(ctxDonut, { type:'doughnut', data:{ labels:Object.keys(statusCount), datasets:[{ data:Object.values(statusCount) }] }, options:{ maintainAspectRatio:false, legend: { position: 'bottom' } } });

    // Line right card (kehadiran mingguan)
    const ctxLine = document.getElementById('line-chart').getContext('2d');
    new Chart(ctxLine, { type:'line', data:{ labels:['Sen','Sel','Rab','Kam','Jum','Sab','Min'], datasets:[{ label:'Hadir', data:[118,120,119,121,122,30,0], borderWidth:2, fill:false, tension:.2 }] }, options:{ maintainAspectRatio:false } });

    // jQuery Knob
    $('.knob').knob();

    // Map (gunakan world map)
    $('#world-map').vectorMap({ map: 'world_en', backgroundColor: 'transparent', color: '#ffffff', enableZoom: true, showTooltip: true, values: {ID: 50, MY: 10, SG: 8}, scaleColors: ['#C8EEFF', '#0071A4'], normalizeFunction: 'polynomial' });
  });
</script>
</body>
</html>
